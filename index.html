<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Making a game in Rust</title>

    <meta name="description" content="Making a game in Rust with the Piston game engine, talk at Rustfest EU ">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/white.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
     var link = document.createElement( 'link' );
     link.rel = 'stylesheet';
     link.type = 'text/css';
     link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
     document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
	<section>
          <h1>Making a game<br>in Rust</h1>
          <p><a href="http://2017.rustfest.eu/">RustFestEU</a> Kyiv ┊ 2017-04-30 ┊ <a href="https://lislis.de">lislis</a></p>
        </section>
        <section>
          <h2>Who am I?</h2>
          <p class="fragment">I'm Lisa,</p>
          <p class="fragment">I work at Travis CI <small>(I have stickers)</small></p>
          <p class="fragment">where I do frontend things.</p>
        </section>
        <section>
          <p>I like making (and playing) video games.</p>
        </section>
        <section>
          <h2>Why making video games?</h2>
          <ul>
            <li class="fragment">It's artistic expression</li>
            <li class="fragment">It's programmatically challenging</li>
            <li class="fragment">It involves logic, graphics, sound and interaction</li>
            <li class="fragment">FUN!</li>
          </ul>
        </section>
        <section>
          <h2>Why use Rust?</h2>
          <p class="fragment">For the scope of an indie game,<br>basically any language will do.</p>
        </section>
        <section>
          <h2>Why use Rust?</h2>
          <p>Big titles are made in C/ C++ on the system level.</p>
          <p>Rust is a system level language.</p>
        </section>
        <section>
          <h2>Why use Rust?</h2>
          <p>Also Rust is new and shiny and I want to try it.</p>
        </section>
        <section>
          <h3>Intermission</h3>
          <p>Every book I ever read on game development had code examples in C++</p>
          <a href="http://shop.oreilly.com/product/9780596005559.do" title="AI for game developers"><img src="http://akamaicovers.oreilly.com/images/9780596005559/cat.gif" alt="book cover"></a>
          <a href="http://shop.oreilly.com/product/0636920012221.do" title="Physics for game developers"><img src="http://akamaicovers.oreilly.com/images/0636920012221/cat.gif" alt="book cover"></a>
          <a href="http://gameprogrammingpatterns.com/" title="Game programming patterns"><img src="https://d.gr-assets.com/books/1415081987l/15499449.jpg" alt="book cover" width="190"></a>
        </section>
        <section>
          <h3>Intermission</h3>
          <p class="fragment">I tried learning C++ 'the hard way'.</p>
          <p class="fragment">But it was actually hard, there didn't seem to be a local community and every other developer recommeneded I should learn basically any other language.</p>
        </section>
        <section>
          <h3>Intermission</h3>
          <p>So I didn't learn C++.</p>
        </section>
        <section>
          <h2>Why use Rust?</h2>
          <p class="fragment">People are exited about it.</p>
          <p class="fragment">And there is a very welcoming community <small>(that's ✨you✨)</small></p>
        </section>
        <section>
          <h1>So, games in Rust</h1>
        </section>
        <section>
          <h2>What do we need?</h2>
          <ul>
            <li class="fragment">An engine</li>
            <li class="fragment">An idea</li>
            <li class="fragment">Time to make it</li>
          <ul>
        </section>
        <section>
          <h2>Picking a game engine</h2>
          <p><a href="http://arewegameyet.com/">arewegameyet.com</a></p>
        </section>
        <section>
          <h3>My pick: <a href="http://www.piston.rs/" title="Piston game engine">Piston</a></h3>
          <ul>
            <li class="fragment">Around for a long time and stil under development</li>
            <li class="fragment">I liked the modularity approach</li>
            <li class="fragment">Quite a few games that I could look at</li>
            <li class="fragment">But documentation ... could be better</li>
          </ul>
        </section>
        <section>
          <h3>Honorable mention</h3>
          <p><a href="http://ggez.rs/" title="ggex engine">ggez</a> for aspriring to be like <a href="https://love2d.org" title="löve">love2d</a></p>
        </section>
        <section>
          <h2>Getting an idea</h2>
        </section>
        <section>
          <p>It can be about anything!</p>
          <p>It's your game!</p>
        </section>
        <section>
          <h3>My game: Manzana Attack</h3>
          <p class="fragment">Based on a true story!</p>
        </section>
        <section>
          <p>DEMO TIME</p>
        </section>

        <section>
          <h2>Building the thing</h2>
        </section>
        <section>
          <h3>Ingredients</h3>
          <pre><code data-trim data-noescape>
# Cargo.toml
[dependencies]
piston_window = "0.64.0"
find_folder = "0.3.0"
rand = "0.3.14"</code></pre>
        </section>
        <section>
        <h3>Ingredients</h3>
          <pre><code data-trim data-noescape>
# Cargo.toml
[dependencies]
<mark>piston_window = "0.64.0"</mark>
find_folder = "0.3.0"
rand = "0.3.14"</code></pre>
          <p class="fragment">Convenience wrapper for core modules!</p>
        </section>
        <section>
          <h3>Fundamentals</h3>
          <ul>
            <li class="fragment">Load</li>
            <li class="fragment">Update</li>
            <li class="fragment">Render</li>
            <li class="fragment">Events</li>
          </ul>
        </section>
        <section>
          <h3>Fundamentals in Piston</h3>
          <pre><code data-trim data-noescape>
// main.rs
extern crate piston_window;

use piston_window::*;

fn main() {
    <span class="fragment">
      let opengl = OpenGL::V3_2;
      let mut window: PistonWindow = WindowSettings::new(
        "Manzana Attack", [500, 700])
        .opengl(opengl)
        .exit_on_esc(true)
        .build().unwrap();</span>

    <span class="fragment">while let Some(e) = window.next() {
        match e {
            Input::Update(args) => {}
            Input::Render(_) => {}
            Input::Release(args) => {}
            _ => {}
        }
    }</span>
}
          </code></pre>
        </section>
        <section>
          <h3>Struct(ure)</h3>
          <pre class="dep-tree" data-trim>
      ╔══════════╗
      ║   Game   ║
      ╚═╦═══════╦╝
        ║       ║
 ╔══════╩═══╗ ╔═╩════════╗
 ║  Player  ║ ║   Folk   ║
 ╚═╦════════╝ ╚══════════╝
   ║╒═══════╕
   ╠╡ Shots │
   ║╘═══════╛
   ║╒═══════╕
   ╚╡ Apple │
    ╘═══════╛


        </section>
        <section>
          <h3>The player</h3>
          <pre><code data-trim data-noescape>

struct Player {
    pub rows: i32,
    pub columns: i32,
    pub x: i32,
    pub y: i32,
    factor: f64,
    pub shots: Shots,
    pub apples: Vec&lt;Apple&gt:
}

impl Player {
    pub fn new() -> Player {
        Player {
            // code
        }
    }
    pub fn throw(&mut self) {
            // code
        self.shots.fire();
        self.apples.push(Apple::new(x, y));
    }
    pub fn update(&mut self) {
        for a in self.apples.iter_mut() {
            a.update();
        }
    }
    pub fn moving(&mut self, x: i32, y: i32) {
        // code
    }
}
          </code></pre>
        </section>
        <section>
          <h3>Shots</h3>
          <pre><code data-trim data-noescape>
struct Shots {
    pub total: i32,
    pub gone: i32,
    pub left: i32
}

impl Shots {
    pub fn new() -> Shots {
        Shots {
            // code
        }
    }
    pub fn fire(&mut self) {
        self.gone += 1;
        self.left -= 1;
    }
}
          </code></pre>
        </section>
        <section>
        <h3>Apples</h3>
          <pre><code data-trim data-noescape>
struct Apple {
    pub active: bool,
    pub x: f64,
    pub y: f64,
    pub w: f64,
    pub h: f64
}

impl Apple {
    pub fn new(param_x: f64, param_y: f64) -> Apple {
        Apple {
            // code
        }
    }
    pub fn update(&mut self) {
        if self.active {
            self.y += 1.0;

            if self.y > 650.0 { // window height_ish
                self.active = false;
            }
        }
    }
    pub fn deactivate(&mut self) {
        self.active = false;
    }
}
          </code></pre>
        </section>
        <section>
          <h3>Folks</h3>
          <pre><code data-trim data-noescape>
struct Folk {
    pub x: f64,
    pub y: f64,
    pub w: f64,
    pub h: f64,
    pub active: bool,
    ltr: bool,
    speed: f64,
    color: [f32; 4]
}

impl Folk {
    pub fn new(param_ltr:bool, param_speed:f64) -> Folk {
        Folk {
            // code
        }
    }
    pub fn update(&mut self) {
        if self.active {
            // code
        }
    }
    pub fn deactivate(&mut self) {
        self.active = false;
    }
}

          </code></pre>
        </section>
        <section>
          <h3>Game</h3>
          <pre><code data-trim data-noescape>
struct Game {
    pub scene: usize,
    pub folks: Vec<Folk>,
    pub player: Player,
    last_folk: f64,
    folk_interval: f64,
    global_time: f64,
    pub score: i32
}

impl Game {
    pub fn new(param_scene: usize) -> Game {
        Game {
            // code
        }
    }
    pub fn set_scene(&mut self, scene: usize) {
        self.scene = scene;
    }

    fn spawn_folk(&mut self) {
        // code
    }

    pub fn update(&mut self, dt: f64) {

        // code that checks if last apple is deactivated

        self.player.update();

        // folk spawn logic

        for f in self.folks.iter_mut() {
            f.update();
        }
    }

    pub fn check_collision(&mut self) {
            // collisiion code
}

          </code></pre>
        </section>
        <section>
          <h3>Things missing</h3>
          <ul>
            <li class="fragment">Sound effects (I want to use <a href="https://github.com/JeremyLetang/ears" title="ears on Github">ears</a>)</li>
            <li class="fragment">More sophisticated scoring logic</li>
            <li class="fragment">Logic to prevent window squatting</li>
          </ul>
        </section>
        <section>
          <h2>That's how <br>I made a game in Rust</h2>
        </section>
        <section>
          <h1>The End</h1>
          <h2>Thank you!</h2>
          <p>https://lislis.de/talks/rustfest-games</p>
          <p><a href="https://github.com/lislis/manzana-attack">https://github.com/lislis/manzana-attack</a></p>
        </section>
      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>

    <script>
     // More info https://github.com/hakimel/reveal.js#configuration
     Reveal.initialize({
       history: true,
       transition: 'none', // none/fade/slide/convex/concave/zoom
       backgroundTransition: 'none',

       // More info https://github.com/hakimel/reveal.js#dependencies
       dependencies: [
	 { src: 'plugin/markdown/marked.js' },
	 { src: 'plugin/markdown/markdown.js' },
	 { src: 'plugin/notes/notes.js', async: true },
	 { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
       ]
     });
    </script>
  </body>
</html>
